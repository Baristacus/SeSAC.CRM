{% extends 'base.jinja2' %}
{% block content %}
<h1>
    <strong>{{ store.Name }}</strong> <small>({{ store.Type }})</small> 상세정보
</h1>
<hr>
<div class="card border-success my-3">
    <div class="card-header">기본정보 (UUID: {{ store.Id }})</div>
    <div class="card-body">
        <dl class="row my-2">
            <dt class="col-sm-2">매장명</dt>
            <dd class="col-sm-10">
                {{ store.Name }}
            </dd>
            <dt class="col-sm-2">지점명</dt>
            <dd class="col-sm-10">
                {{ store.Type }}
            </dd>
            <dt class="col-sm-2">주소</dt>
            <dd class="col-sm-10">
                {{ store.Address }}
            </dd>
            <dt class="col-sm-2">총 매출액</dt>
            <dd class="col-sm-10">
                ₩ {{ '{:,}'.format(total_sales) }}
            </dd>
            <dt class="col-sm-2">월 평균 매출액</dt>
            <dd class="col-sm-10">
                ₩ {{ '{:,.0f}'.format(total_sales/sales|length) }}
            </dd>
        </dl>
    </div>
</div>
<div class="card border-primary my-3">
    <div class="card-header">
        월간 매출액
    </div>
    <ul class="list-group list-group-flush">
        {% for sale in sales %}
        <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-start">
            <div class="ms-2 me-auto">
                <span class="fw-bold">{{ sale.Month }}</span> (주문 수: {{ sale.OrderCount }}건)
            </div>
            <div>₩ {{ '{:,}'.format(sale.MonthlySales) }}</div>
        </li>
        {% endfor %}
    </ul>
</div>
<div class="card border-primary my-3">
    <div class="card-header">단골 고객</div>
    <ul class="list-group list-group-flush">
        {% for vip in vip_users %}
        <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-start">
            <div class="ms-2 me-auto"><a href="{{ url_for('user.get_user', id=vip.User.Id) }}"
                    class="text-primary fw-bold text-decoration-none">{{ vip.Name }}</a></div>
            <div>{{ vip.OrderCount }}회 주문</div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}